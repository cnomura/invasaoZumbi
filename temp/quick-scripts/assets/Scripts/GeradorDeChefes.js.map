{"version":3,"sources":["GeradorDeChefes.js"],"names":["cc","Class","extends","Component","properties","chefePrefab","Prefab","alvo","Node","tempoParaGerar","Float","_pontos","default","type","onLoad","director","getScene","on","adicionarPontoALista","schedule","gerar","evento","ponto","getUserData","node","push","escolhePontoMaisDistante","chefe","instantiate","parent","position","maiorDistanciaCalculada","pontoMaisDistante","i","length","pontoAtual","vetorDistancia","sub","distancia","mag"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,qBAAaL,GAAGM,MADR;AAERC,cAAMP,GAAGQ,IAFD;AAGRC,wBAAgBT,GAAGU,KAHX;AAIRC,iBAAS;AACLC,qBAAS,EADJ;AAELC,kBAAMb,GAAGQ;AAFJ;AAJD,KAHP;;AAcLM,YAAQ,kBAAY;AAChBd,WAAGe,QAAH,CAAYC,QAAZ,GAAuBC,EAAvB,CAA0B,4BAA1B,EAAwD,KAAKC,oBAA7D,EAAmF,IAAnF;AACA,aAAKC,QAAL,CAAc,KAAKC,KAAnB,EAA0B,KAAKX,cAA/B;AACH,KAjBI;;AAmBLS,0BAAsB,8BAAUG,MAAV,EAAkB;AACpC,YAAIC,QAAQD,OAAOE,WAAP,GAAqBC,IAAjC;AACA,aAAKb,OAAL,CAAac,IAAb,CAAkBH,KAAlB;AACH,KAtBI;;AAwBLF,WAAO,iBAAY;AACf,YAAIE,QAAQ,KAAKI,wBAAL,EAAZ;AACA,YAAIC,QAAQ3B,GAAG4B,WAAH,CAAe,KAAKvB,WAApB,CAAZ;AACAsB,cAAME,MAAN,GAAeP,MAAMO,MAArB;AACAF,cAAMG,QAAN,GAAiBR,MAAMQ,QAAvB;AACH,KA7BI;;AA+BLJ,8BAA0B,oCAAY;;AAElC,YAAIK,0BAA0B,CAA9B;AACA,YAAIC,oBAAoB,KAAKrB,OAAL,CAAa,CAAb,CAAxB;AACA,aAAK,IAAIsB,IAAI,CAAb,EAAgBA,IAAI,KAAKtB,OAAL,CAAauB,MAAjC,EAAyCD,GAAzC,EAA8C;AAC1C,gBAAIE,aAAa,KAAKxB,OAAL,CAAasB,CAAb,CAAjB;AACA,gBAAIG,iBAAiBD,WAAWL,QAAX,CAAoBO,GAApB,CAAwB,KAAK9B,IAAL,CAAUuB,QAAlC,CAArB;AACA,gBAAIQ,YAAYF,eAAeG,GAAf,EAAhB;AACA,gBAAID,YAAYP,uBAAhB,EAAyC;AACrCA,0CAA0BO,SAA1B;AACAN,oCAAoBG,UAApB;AACH;AACJ;AACD,eAAOH,iBAAP;AACH;AA7CI,CAAT","file":"GeradorDeChefes.js","sourceRoot":"..\\..\\..\\..\\assets\\Scripts","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        chefePrefab: cc.Prefab,\n        alvo: cc.Node,\n        tempoParaGerar: cc.Float,\n        _pontos: {\n            default: [],\n            type: cc.Node\n        }\n    },\n\n\n    onLoad: function () {\n        cc.director.getScene().on(\"adicionarAoGeradorDeChefes\", this.adicionarPontoALista, this);\n        this.schedule(this.gerar, this.tempoParaGerar);\n    },\n\n    adicionarPontoALista: function (evento) {\n        let ponto = evento.getUserData().node;\n        this._pontos.push(ponto);\n    },\n\n    gerar: function () {\n        let ponto = this.escolhePontoMaisDistante();\n        let chefe = cc.instantiate(this.chefePrefab);\n        chefe.parent = ponto.parent;\n        chefe.position = ponto.position;\n    },\n\n    escolhePontoMaisDistante: function () {\n\n        let maiorDistanciaCalculada = 0;\n        let pontoMaisDistante = this._pontos[0];\n        for (let i = 0; i < this._pontos.length; i++) {\n            let pontoAtual = this._pontos[i];\n            let vetorDistancia = pontoAtual.position.sub(this.alvo.position);\n            let distancia = vetorDistancia.mag();\n            if (distancia > maiorDistanciaCalculada) {\n                maiorDistanciaCalculada = distancia;\n                pontoMaisDistante = pontoAtual;\n            }\n        }\n        return pontoMaisDistante;\n    }\n});"]}