{"version":3,"sources":["ControleDeAnimacao.js"],"names":["cc","Class","extends","Component","properties","anguloDiagonal","Float","_animacao","Animation","_senoMinimo","_cossenoMinimo","onLoad","getComponent","play","Math","sin","degreesToRadians","cos","mudaAnimacao","direcao","estado","proximaAnimacao","angulo","atan2","y","x","cosseno","abs","seno","getAnimationState","isPlaying"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,wBAAgBL,GAAGM,KADX;AAERC,mBAAWP,GAAGQ,SAFN;AAGRC,qBAAaT,GAAGM,KAHR;AAIRI,wBAAgBV,GAAGM;AAJX,KAHP;;AAULK,YAAQ,kBAAY;AAChB,aAAKJ,SAAL,GAAiB,KAAKK,YAAL,CAAkBZ,GAAGQ,SAArB,CAAjB;AACA,aAAKD,SAAL,CAAeM,IAAf,CAAoB,YAApB;;AAEA,aAAKJ,WAAL,GAAmBK,KAAKC,GAAL,CAASf,GAAGgB,gBAAH,CAAoB,KAAKX,cAAzB,CAAT,CAAnB;AACA,aAAKK,cAAL,GAAsBI,KAAKG,GAAL,CAASjB,GAAGgB,gBAAH,CAAoB,KAAK,KAAKX,cAA9B,CAAT,CAAtB;AACH,KAhBI;;AAkBLa,kBAAc,sBAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AACrC,YAAIC,kBAAkBD,MAAtB;;AAEA,YAAIE,SAASR,KAAKS,KAAL,CAAWJ,QAAQK,CAAnB,EAAsBL,QAAQM,CAA9B,CAAb;;AAEA,YAAIC,UAAUZ,KAAKG,GAAL,CAASK,MAAT,CAAd;AACAI,kBAAUZ,KAAKa,GAAL,CAASD,OAAT,CAAV;;AAEA,YAAIE,OAAOd,KAAKC,GAAL,CAASO,MAAT,CAAX;AACAM,eAAOd,KAAKa,GAAL,CAASC,IAAT,CAAP;;AAEA,YAAIF,UAAU,KAAKhB,cAAnB,EAAmC;AAC/B,gBAAIS,QAAQM,CAAR,GAAY,CAAhB,EAAmB;AACfJ,mCAAmB,SAAnB;AACH,aAFD,MAEO,IAAIF,QAAQM,CAAR,GAAY,CAAhB,EAAmB;AACtBJ,mCAAmB,UAAnB;AACH;AACJ;;AAED,YAAIO,OAAO,KAAKnB,WAAhB,EAA6B;AACzB,gBAAIU,QAAQK,CAAR,GAAY,CAAhB,EAAmB;AACfH,mCAAmB,MAAnB;AACH,aAFD,MAEO,IAAIF,QAAQK,CAAR,GAAY,CAAhB,EAAmB;AACtBH,mCAAmB,OAAnB;AACH;AACJ;;AAED,YAAI,CAAC,KAAKd,SAAL,CAAesB,iBAAf,CAAiCR,eAAjC,EAAkDS,SAAvD,EAAkE;AAC9D,iBAAKvB,SAAL,CAAeM,IAAf,CAAoBQ,eAApB;AACH;AACJ;AAhDI,CAAT","file":"ControleDeAnimacao.js","sourceRoot":"..\\..\\..\\..\\assets\\Scripts","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        anguloDiagonal: cc.Float,\n        _animacao: cc.Animation,\n        _senoMinimo: cc.Float,\n        _cossenoMinimo: cc.Float,\n    },\n\n    onLoad: function () {\n        this._animacao = this.getComponent(cc.Animation);\n        this._animacao.play(\"AndarBaixo\");\n\n        this._senoMinimo = Math.sin(cc.degreesToRadians(this.anguloDiagonal));\n        this._cossenoMinimo = Math.cos(cc.degreesToRadians(90 - this.anguloDiagonal));\n    },\n\n    mudaAnimacao: function (direcao, estado) {\n        let proximaAnimacao = estado;\n\n        let angulo = Math.atan2(direcao.y, direcao.x);\n\n        let cosseno = Math.cos(angulo);\n        cosseno = Math.abs(cosseno);\n\n        let seno = Math.sin(angulo);\n        seno = Math.abs(seno);\n\n        if (cosseno > this._cossenoMinimo) {\n            if (direcao.x > 0) {\n                proximaAnimacao += \"Direita\";\n            } else if (direcao.x < 0) {\n                proximaAnimacao += \"Esquerda\";\n            }\n        }\n\n        if (seno > this._senoMinimo) {\n            if (direcao.y > 0) {\n                proximaAnimacao += \"Cima\";\n            } else if (direcao.y < 0) {\n                proximaAnimacao += \"Baixo\";\n            }\n        }\n\n        if (!this._animacao.getAnimationState(proximaAnimacao).isPlaying) {\n            this._animacao.play(proximaAnimacao);\n        }\n    }\n});"]}